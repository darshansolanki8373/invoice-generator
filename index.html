<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>Invoice Generator (Offline)</title>
<meta name="theme-color" content="#0f172a">
<!-- PWA meta tags -->
<meta name="description" content="Generate invoices offline and save them on your device">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="black">
<!-- PWA manifest and icons -->
<link rel="manifest" href="manifest.json">
<link rel="apple-touch-icon" href="icon-192.png">
<style>
  :root{
    --bg:#0f172a;          /* slate-900 */
    --card:#111827;        /* gray-900 */
    --muted:#9ca3af;       /* gray-400 */
    --text:#e5e7eb;        /* gray-200 */
    --ink:#f8fafc;         /* slate-50 */
    --accent:#22c55e;      /* green-500 */
    --danger:#ef4444;      /* red-500 */
    --border:#1f2937;      /* gray-800 */
  }
[Rest of the existing file content remains exactly the same until the end of the DOMContentLoaded event listener where we add:]

  // Initial
  loadDraft();
  if(state.items.length===0) addRow({});
  if(!el('invDate').value){
    const today = new Date().toISOString().slice(0,10);
    el('invDate').value = today;
  }
  
  // Register Service Worker
  if ('serviceWorker' in navigator) {
    navigator.serviceWorker.register('sw.js').then(function(registration) {
      console.log('ServiceWorker registration successful');
    }).catch(function(err) {
      console.log('ServiceWorker registration failed: ', err);
    });
  }
});
